-- Add active_badge_id column to profiles table
ALTER TABLE profiles ADD COLUMN IF NOT EXISTS active_badge_id UUID REFERENCES badges(id) ON DELETE SET NULL;

-- Update badges with custom SVG icons
UPDATE badges SET 
  name = 'Early Supporter',
  description = 'One of the first to join Peeak',
  icon_url = '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.73 3.51001L15.49 7.03001C15.73 7.52002 16.37 7.99001 16.91 8.08001L20.1 8.61001C22.14 8.95001 22.62 10.43 21.15 11.89L18.67 14.37C18.25 14.79 18.02 15.6 18.15 16.18L18.86 19.25C19.42 21.68 18.13 22.62 15.98 21.35L12.99 19.58C12.45 19.26 11.56 19.26 11.01 19.58L8.01997 21.35C5.87997 22.62 4.57997 21.67 5.13997 19.25L5.84997 16.18C5.97997 15.6 5.74997 14.79 5.32997 14.37L2.84997 11.89C1.38997 10.43 1.85997 8.95001 3.89997 8.61001L7.08997 8.08001C7.61997 7.99001 8.25997 7.52002 8.49997 7.03001L10.26 3.51001C11.22 1.60001 12.78 1.60001 13.73 3.51001Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',
  color = '#f59e0b'
WHERE name = 'Early Adopter';

UPDATE badges SET 
  name = 'Verified',
  description = 'Verified account',
  icon_url = '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.78132 3.89027C10.3452 3.40974 10.6271 3.16948 10.9219 3.02859C11.6037 2.70271 12.3963 2.70271 13.0781 3.02859C13.3729 3.16948 13.6548 3.40974 14.2187 3.89027C14.4431 4.08152 14.5553 4.17715 14.6752 4.25747C14.9499 4.4416 15.2584 4.56939 15.5828 4.63344C15.7244 4.66139 15.8713 4.67312 16.1653 4.69657C16.9038 4.7555 17.273 4.78497 17.5811 4.89378C18.2936 5.14546 18.8541 5.70591 19.1057 6.41844C19.2146 6.72651 19.244 7.09576 19.303 7.83426C19.3264 8.12819 19.3381 8.27515 19.3661 8.41669C19.4301 8.74114 19.5579 9.04965 19.7421 9.32437C19.8224 9.44421 19.918 9.55642 20.1093 9.78084C20.5898 10.3447 20.83 10.6267 20.9709 10.9214C21.2968 11.6032 21.2968 12.3958 20.9709 13.0776C20.83 13.3724 20.5898 13.6543 20.1093 14.2182C19.918 14.4426 19.8224 14.5548 19.7421 14.6747C19.5579 14.9494 19.4301 15.2579 19.3661 15.5824C19.3381 15.7239 19.3264 15.8709 19.303 16.1648C19.244 16.9033 19.2146 17.2725 19.1057 17.5806C18.8541 18.2931 18.2936 18.8536 17.5811 19.1053C17.273 19.2141 16.9038 19.2435 16.1653 19.3025C15.8713 19.3259 15.7244 19.3377 15.5828 19.3656C15.2584 19.4297 14.9499 19.5574 14.6752 19.7416C14.5553 19.8219 14.4431 19.9175 14.2187 20.1088C13.6548 20.5893 13.3729 20.8296 13.0781 20.9705C12.3963 21.2963 11.6037 21.2963 10.9219 20.9705C10.6271 20.8296 10.3452 20.5893 9.78132 20.1088C9.55689 19.9175 9.44468 19.8219 9.32484 19.7416C9.05013 19.5574 8.74161 19.4297 8.41717 19.3656C8.27563 19.3377 8.12867 19.3259 7.83474 19.3025C7.09623 19.2435 6.72698 19.2141 6.41892 19.1053C5.70639 18.8536 5.14593 18.2931 4.89426 17.5806C4.78545 17.2725 4.75598 16.9033 4.69705 16.1648C4.67359 15.8709 4.66186 15.7239 4.63392 15.5824C4.56987 15.2579 4.44208 14.9494 4.25795 14.6747C4.17763 14.5548 4.082 14.4426 3.89075 14.2182C3.41022 13.6543 3.16996 13.3724 3.02906 13.0776C2.70319 12.3958 2.70319 11.6032 3.02906 10.9214C3.16996 10.6266 3.41022 10.3447 3.89075 9.78084C4.082 9.55642 4.17763 9.44421 4.25795 9.32437C4.44208 9.04965 4.56987 8.74114 4.63392 8.41669C4.66186 8.27515 4.67359 8.12819 4.69705 7.83426C4.75598 7.09576 4.78545 6.72651 4.89426 6.41844C5.14593 5.70591 5.70639 5.14546 6.41892 4.89378C6.72698 4.78497 7.09623 4.7555 7.83474 4.69657C8.12867 4.67312 8.27563 4.66139 8.41717 4.63344C8.74161 4.56939 9.05013 4.4416 9.32484 4.25747C9.44468 4.17715 9.55689 4.08152 9.78132 3.89027Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M9 12L10.8189 13.8189V13.8189C10.9189 13.9189 11.0811 13.9189 11.1811 13.8189V13.8189L15 10" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',
  color = '#3b82f6'
WHERE name = 'Verified';

-- Insert new badges
INSERT INTO badges (name, description, icon_url, color) VALUES
  ('Bug Finder', 'Helped find and report bugs', '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="11.5" cy="11.5" r="9.5" stroke="#1C274C" stroke-width="1.5"/><path d="M11.5 15.5C9.84315 15.5 8.5 14.1569 8.5 12.5V10.5M11.5 15.5C13.1569 15.5 14.5 14.1569 14.5 12.5V10.5M11.5 15.5V10.5M14.5 10.5C14.5 8.84315 13.1569 7.5 11.5 7.5C9.84315 7.5 8.5 8.84315 8.5 10.5M14.5 10.5H8.5M14.5715 11.5H16M7 11.5H8.5M14.5 14L15.5 14.5M8.5 14L7.5 14.5M14.5 9L15.5 8.5M8.5 9L7.5 8.5" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"/><path d="M20 20L22 22" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"/></svg>', '#ef4444'),
  ('Beta Tester', 'Participated in beta testing', '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.16001 22C3.98001 22 3.14001 19.47 4.50001 16.39L8.75001 6.74H8.45001C7.80001 6.74 7.20001 6.48 6.77001 6.05C6.33001 5.62 6.07001 5.02 6.07001 4.37C6.07001 3.07 7.13001 2 8.44001 2H15.55C16.21 2 16.8 2.27 17.23 2.7C17.79 3.26 18.07 4.08 17.86 4.95C17.59 6.03 16.55 6.74 15.44 6.74H15.28L19.5 16.4C20.85 19.48 19.97 22 15.83 22H8.16001Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M5.94 13.1201C5.94 13.1201 9 13.0001 12 14.0001C15 15.0001 17.83 13.1101 17.83 13.1101" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>', '#8b5cf6'),
  ('Verified Moderator', 'Trusted community moderator', '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.91 11.12C20.91 16.01 17.36 20.59 12.51 21.93C12.18 22.02 11.82 22.02 11.49 21.93C6.63996 20.59 3.08997 16.01 3.08997 11.12V6.72997C3.08997 5.90997 3.70998 4.97998 4.47998 4.66998L10.05 2.39001C11.3 1.88001 12.71 1.88001 13.96 2.39001L19.53 4.66998C20.29 4.97998 20.92 5.90997 20.92 6.72997L20.91 11.12Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>', '#10b981'),
  -- Updated First 50 Posts badge with complete SVG icon
  ('First 50 Posts', 'Created 50 posts on Peeak', '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.5798 15.0077L8.10934 14.4766L7.5798 15.0077ZM7.57981 9.53078L7.05027 8.99965L7.57981 9.53078ZM14.4466 16.3769L13.917 15.8458L14.4466 16.3769ZM8.95316 16.3769L8.42362 16.9081L8.95316 16.3769ZM11.6999 18.3133V19.0633V18.3133ZM20.2934 10.5476L20.823 11.0788L20.2934 10.5476ZM13.4267 3.70146L13.9562 4.23259L13.4267 3.70146ZM10.856 14.1696C11.1494 13.8771 11.1501 13.4023 10.8576 13.1089C10.5652 12.8156 10.0903 12.8149 9.79698 13.1073L10.856 14.1696ZM5.57332 11.5312L6.10365 11.0009L6.10286 11.0001L5.57332 11.5312ZM9.91958 7.42196C10.2679 7.64613 10.732 7.5455 10.9562 7.1972C11.1803 6.84889 11.0797 6.3848 10.7314 6.16062L9.91958 7.42196ZM9.69627 6.38632L10.1022 5.75565V5.75565L9.69627 6.38632ZM7.12664 5.0678L7.23629 4.32586L7.12664 5.0678ZM2.22514 8.02324L2.75467 8.55437H2.75467L2.22514 8.02324ZM5.33941 5.29621L5.62684 5.98894H5.62684L5.33941 5.29621ZM2.86314 9.42603L2.58685 10.1233H2.58686L2.86314 9.42603ZM2.98636 9.47534L3.27206 8.78189L2.98636 9.47534ZM4.61259 10.5734L5.14212 10.0423L4.61259 10.5734ZM4.51839 10.4801L3.99611 11.0184L4.51839 10.4801ZM2.48449 9.276L2.76078 8.57874H2.76078L2.48449 9.276ZM12.5 18.5L11.9697 19.0303C11.9813 19.0419 11.9932 19.0531 12.0056 19.0639L12.5 18.5ZM17.8238 13.2319C17.5987 12.8842 17.1344 12.7848 16.7867 13.0099C16.439 13.2351 16.3396 13.6994 16.5647 14.0471L17.8238 13.2319ZM17.6005 14.2668L16.9709 14.6745L17.6005 14.2668ZM18.923 16.8287L19.6648 16.7184L18.923 16.8287ZM15.9586 21.7155L16.4882 22.2467L15.9586 21.7155ZM18.6939 18.6106L19.386 18.8995L18.6939 18.6106ZM14.749 21.5747L15.4457 21.2969L14.749 21.5747ZM14.2748 20.4828L14.9324 20.1221L14.2748 20.4828ZM13.0229 18.9584L13.5524 18.4273L13.5354 18.4104L13.5173 18.3945L13.0229 18.9584ZM13.8408 19.8249L14.4311 19.3623L13.8408 19.8249ZM15.8746 21.7993L15.3451 21.2682L15.8746 21.7993ZM5.74956 11.7075L6.44541 11.9873L5.74956 11.7075ZM5.05371 11.4277C4.71426 11.2949 4.32743 11.4663 4.19461 11.8058C4.06179 12.1452 4.23322 12.532 4.57267 12.6649L5.05371 11.4277ZM8.10934 14.4766C8.40268 14.1842 8.40338 13.7093 8.11097 13.416C7.81856 13.1226 7.34369 13.1219 7.05035 13.4143L8.10934 14.4766ZM7.05027 8.99965C6.75693 9.29206 6.75763 9.76693 7.05004 10.0603C7.34245 10.3536 7.81732 10.3529 8.11066 10.0605L7.05027 8.99965ZM13.917 15.8458C13.6237 15.5534 13.1488 15.5541 12.8564 15.8474C12.564 16.1408 12.5647 16.6156 12.858 16.908L13.917 15.8458ZM8.42362 16.9081C8.71696 17.2005 9.19183 17.1998 9.48424 16.9064C9.77665 16.6131 9.77595 16.1382 9.48261 15.8458L8.42362 16.9081ZM11.6999 19.0633C12.1141 19.0633 12.4499 18.7275 12.4499 18.3133C12.4499 17.8991 12.1141 17.5633 11.6999 17.5633V19.0633ZM19.7639 10.0165C19.4715 9.72312 18.9966 9.72242 18.7032 10.0148C18.4098 10.3072 18.4091 10.7821 18.7015 11.0755L19.7639 10.0165ZM12.8971 3.17033C12.6039 2.87792 12.129 2.87862 11.8366 3.17196C11.5442 3.4653 11.5449 3.94017 11.8382 4.23258L12.8971 3.17033ZM9.79698 13.1073L7.05027 15.8388L8.10934 16.9011L10.856 14.1696L9.79698 13.1073ZM7.05027 15.8388L7.05027 8.99965L8.11066 10.0605L8.11066 16.8997L7.05027 15.8388ZM12.858 16.908L14.9761 16.908L14.9761 15.8458L12.858 15.8458L12.858 16.908ZM9.48261 15.8458L8.42362 16.9081L9.48261 15.8458ZM11.6999 17.5633C10.9857 17.5633 10.3999 17.5633 9.92697 17.6097C9.44136 17.6574 9.01697 17.7589 8.62697 18.0097L9.27935 19.1458C9.42697 19.0574 9.62697 18.9858 10.0097 18.9497C10.4057 18.9122 10.9297 18.9133 11.6999 18.9133V17.5633ZM8.42362 16.9081C8.15697 17.1747 7.95697 17.3747 7.80697 17.5497C7.65697 17.7247 7.58697 17.8458 7.54697 17.9458C7.50697 18.0458 7.48697 18.1458 7.47697 18.2858C7.46697 18.4258 7.46697 18.6058 7.46697 18.8858H8.96697C8.96697 18.5858 8.96697 18.4458 8.97697 18.3458C8.98697 18.2458 8.99697 18.2058 9.00697 18.1858C9.01697 18.1658 9.03697 18.1258 9.11697 18.0258C9.19697 17.9258 9.32697 17.7858 9.62697 17.4858L8.42362 16.9081ZM8.62697 18.0097C8.23697 18.2605 7.95697 18.5405 7.74697 18.8605C7.53697 19.1805 7.40697 19.5205 7.33697 19.9005C7.26697 20.2805 7.25697 20.6805 7.25697 21.1405H8.75697C8.75697 20.6605 8.76697 20.3605 8.81697 20.1405C8.86697 19.9205 8.94697 19.7605 9.05697 19.6205C9.16697 19.4805 9.32697 19.3405 9.62697 19.1458L8.62697 18.0097ZM7.25697 21.1405V22.0005H8.75697V21.1405H7.25697ZM20.823 11.0788C21.5163 10.3888 22.0163 9.88878 22.3563 9.44878C22.7063 8.99878 22.9363 8.55878 23.0163 8.04878L21.5363 7.78878C21.5163 7.90878 21.4563 8.05878 21.2163 8.38878C20.9663 8.72878 20.5763 9.13878 19.7639 9.94878L20.823 11.0788ZM23.0163 8.04878C23.1363 7.32878 22.9963 6.58878 22.6163 5.95878C22.2363 5.32878 21.6463 4.84878 20.9463 4.60878L20.4963 6.03878C20.8363 6.16878 21.1163 6.40878 21.2963 6.71878C21.4763 7.02878 21.5363 7.38878 21.4763 7.73878L23.0163 8.04878ZM20.9463 4.60878C20.2463 4.36878 19.4763 4.38878 18.7963 4.66878C18.1163 4.94878 17.5763 5.46878 17.2763 6.11878L18.6163 6.78878C18.7763 6.46878 19.0463 6.21878 19.3763 6.07878C19.7063 5.93878 20.0763 5.91878 20.4263 6.02878L20.9463 4.60878ZM17.2763 6.11878C16.9763 6.76878 16.9363 7.50878 17.1563 8.18878C17.3763 8.86878 17.8363 9.43878 18.4563 9.78878L19.1963 8.48878C18.8763 8.29878 18.6363 8.00878 18.5163 7.66878C18.3963 7.32878 18.3963 6.95878 18.5363 6.62878L17.2763 6.11878ZM18.4563 9.78878C19.0763 10.1388 19.7963 10.2488 20.4963 10.0988C21.1963 9.94878 21.8163 9.54878 22.2363 8.97878L20.9963 8.17878C20.7963 8.46878 20.4963 8.67878 20.1563 8.76878C19.8163 8.85878 19.4563 8.82878 19.1363 8.67878L18.4563 9.78878ZM13.9562 4.23259C14.6462 3.53926 15.1462 3.03926 15.5862 2.69926C16.0362 2.34926 16.4762 2.11926 16.9862 2.03926L16.7262 0.559259C15.9962 0.679259 15.2562 0.819259 14.6262 1.19926C13.9862 1.57926 13.4962 2.16926 12.8971 3.17033L13.9562 4.23259ZM16.9862 2.03926C17.7062 1.91926 18.4462 2.05926 19.0762 2.43926C19.7062 2.81926 20.1862 3.40926 20.4262 4.10926L21.8962 3.65926C21.5562 2.65926 20.8962 1.79926 20.0162 1.23926C19.1362 0.679259 18.0862 0.449259 17.0662 0.599259L16.9862 2.03926ZM20.4262 4.10926C20.6662 4.80926 20.6462 5.57926 20.3662 6.25926C20.0862 6.93926 19.5662 7.47926 18.9162 7.77926L19.5862 9.11926C20.5862 8.65926 21.3962 7.85926 21.8462 6.85926C22.2962 5.85926 22.3562 4.73926 21.9962 3.69926L20.4262 4.10926ZM18.9162 7.77926C18.2662 8.07926 17.5262 8.11926 16.8462 7.89926C16.1662 7.67926 15.5962 7.21926 15.2462 6.59926L13.9062 7.26926C14.4562 8.26926 15.3162 9.07926 16.3662 9.47926C17.4162 9.87926 18.5762 9.83926 19.5962 9.35926L18.9162 7.77926ZM6.10286 11.0001L5.04378 9.94192L4.08305 11.1045L6.04378 12.0623L6.10286 11.0001ZM10.7314 6.16062L9.29033 7.01699L10.1022 5.75565L10.7314 6.16062ZM9.29033 7.01699C8.85033 7.27699 8.33033 7.37699 7.82033 7.29699L7.01699 5.80979C7.43699 5.87979 7.86699 5.82979 8.25699 5.65979L9.29033 7.01699ZM7.82033 7.29699C7.31033 7.21699 6.84033 6.96699 6.48033 6.58699L5.04378 9.94192C5.40378 10.3219 5.87378 10.5719 6.38378 10.6519L7.82033 7.29699ZM6.48033 6.58699C6.12033 6.20699 5.87033 5.73699 5.79033 5.22699L7.23629 4.32586C7.30629 4.74586 7.55629 5.17586 7.93629 5.53586L6.48033 6.58699ZM5.79033 5.22699C5.71033 4.71699 5.81033 4.19699 6.07033 3.75699L7.42033 4.78699C7.25033 5.17699 7.20033 5.60699 7.27033 6.02699L5.79033 5.22699ZM6.07033 3.75699C6.33033 3.31699 6.73033 2.97699 7.20033 2.78699L7.82033 4.22699C7.43033 4.39699 7.10033 4.68699 6.88033 5.05699L6.07033 3.75699ZM7.20033 2.78699C7.67033 2.59699 8.19033 2.56699 8.68033 2.69699L8.25699 4.15699C7.83699 4.02699 7.38699 4.05699 6.98699 4.23699L7.20033 2.78699ZM8.68033 2.69699C9.17033 2.82699 9.60033 3.10699 9.91033 3.49699L8.62033 4.68699C8.39033 4.39699 8.07033 4.18699 7.71033 4.07699L8.68033 2.69699ZM9.91033 3.49699C10.2203 3.88699 10.4003 4.36699 10.4203 4.86699L8.92033 4.95699C8.91033 4.53699 8.75033 4.13699 8.47033 3.81699L9.91033 3.49699ZM10.4203 4.86699C10.4403 5.36699 10.3103 5.86699 10.0403 6.29699L8.69033 5.26699C8.86033 4.97699 8.93033 4.63699 8.90033 4.29699L10.4203 4.86699ZM1.69561 7.49211C1.40227 7.19971 1.40297 6.72484 1.69538 6.4315C1.98779 6.13816 2.46266 6.13886 2.756 6.43127L1.69561 7.49211ZM5.05198 4.60348C4.70198 4.47066 4.31515 4.64209 4.18233 4.99154C4.04951 5.34099 4.22094 5.72782 4.57039 5.86064L5.05198 4.60348ZM3.13943 8.72876C2.86314 8.02603 3.20314 7.22603 3.90587 6.94974L3.13943 8.72876ZM2.70066 10.1688C2.42437 9.46603 2.76437 8.66603 3.46711 8.38974L2.70066 10.1688ZM4.08306 11.1045C3.55306 10.8045 3.15306 10.2745 3.00306 9.64449L4.48306 9.27449C4.52306 9.44449 4.62306 9.59449 4.76306 9.69449L4.08306 11.1045ZM5.04067 9.41849L3.99611 11.0184L5.04067 9.41849ZM3.99611 11.0184C3.70277 11.3108 3.70347 11.7857 3.99588 12.0791C4.28829 12.3724 4.76316 12.3717 5.0565 12.0793L3.99611 11.0184ZM2.20821 9.97326C1.91487 9.68085 1.91557 9.20598 2.20798 8.91264C2.50039 8.6193 2.97526 8.62 3.2686 8.91241L2.20821 9.97326ZM11.9697 19.0303C12.2621 19.3227 12.737 19.3234 13.0303 19.031C13.3237 18.7386 13.3244 18.2637 13.032 17.9703L11.9697 19.0303ZM16.5647 14.0471L18.2302 13.8592L16.9709 14.6745L16.5647 14.0471ZM18.2302 13.8592C18.5502 14.3592 18.7302 14.9392 18.7502 15.5392L17.2502 15.6292C17.2402 15.2092 17.1202 14.8092 16.9002 14.4592L18.2302 13.8592ZM18.7502 15.5392C18.7702 16.1392 18.6402 16.7392 18.3702 17.2692L17.0202 16.5392C17.1902 16.2492 17.2602 15.9092 17.2302 15.5692L18.7502 15.5392ZM18.3702 17.2692C18.1002 17.7992 17.7002 18.2392 17.2102 18.5392L16.4802 17.0992C16.7802 16.9292 17.0202 16.6692 17.1802 16.3592L18.3702 17.2692ZM17.2102 18.5392C16.7202 18.8392 16.1502 18.9892 15.5802 18.9692L15.4902 17.4692C15.8102 17.4792 16.1202 17.3892 16.3902 17.2092L17.2102 18.5392ZM15.5802 18.9692C14.9802 18.9492 14.4002 18.7692 13.9002 18.4492L14.6302 16.9992C14.9202 17.1692 15.2602 17.2392 15.6002 17.2692L15.5802 18.9692ZM13.9002 18.4492C13.4002 18.1292 12.9902 17.6792 12.7202 17.1492L14.0702 16.4192C14.2402 16.7192 14.5002 16.9592 14.8102 17.1192L13.9002 18.4492ZM12.7202 17.1492C12.4502 16.6192 12.3302 16.0192 12.3702 15.4192L13.8702 15.5092C13.8502 15.8292 13.9302 16.1492 14.0902 16.4292L12.7202 17.1492ZM15.4291 21.1843L16.4882 22.2467L15.4291 21.1843ZM16.4882 22.2467C16.7806 22.5391 17.2555 22.5398 17.5488 22.2474C17.8422 21.955 17.8429 21.4801 17.5505 21.1868L16.4882 22.2467ZM18.0018 18.3217C18.2959 18.0283 18.2966 17.5534 18.0032 17.2601C17.7098 16.9667 17.2349 16.966 16.9416 17.2594L18.0018 18.3217ZM14.0523 21.8525C13.7589 22.1449 13.7582 22.6198 14.0506 22.9132C14.343 23.2065 14.8179 23.2072 15.1113 22.9148L14.0523 21.8525ZM13.6172 20.8435C13.3238 21.1359 13.3231 21.6108 13.6155 21.9042C13.9079 22.1975 14.3828 22.1982 14.6762 21.9058L13.6172 20.8435ZM12.4933 19.4895C12.1999 19.7819 12.1992 20.2568 12.4916 20.5502C12.784 20.8435 13.2589 20.8442 13.5523 20.5518L12.4933 19.4895ZM13.2505 20.3249C13.5439 20.0325 13.5446 19.5576 13.2522 19.2642C12.9598 18.9708 12.4849 18.9701 12.1915 19.2625L13.2505 20.3249ZM16.4042 22.2304C16.6966 22.5228 17.1715 22.5235 17.4648 22.2311C17.7582 21.9387 17.7589 21.4638 17.4665 21.1705L16.4042 22.2304ZM5.05371 11.4277L4.57267 12.6649L5.05371 11.4277ZM4.57267 12.6649C4.91212 12.7977 5.05371 13.1845 4.92089 13.524C4.78807 13.8634 4.40124 14.0049 4.06179 13.872L4.57267 12.6649ZM7.05035 13.4143L6.04378 12.0623L7.16692 11.3527L8.17349 12.7047L7.05035 13.4143ZM19.7639 9.94878L20.823 11.0788L19.7639 9.94878ZM18.7015 11.0755C19.3915 11.7655 19.8915 12.2655 20.2315 12.7055C20.5815 13.1555 20.8115 13.5955 20.8915 14.1055L19.4115 14.3655C19.3915 14.2455 19.3315 14.0955 19.0915 13.7655C18.8415 13.4255 18.4515 13.0155 17.6415 12.2055L18.7015 11.0755ZM20.8915 14.1055C21.0115 14.8255 20.8715 15.5655 20.4915 16.1955C20.1115 16.8255 19.5215 17.3055 18.8215 17.5455L18.3715 16.1155C18.7115 15.9855 18.9915 15.7455 19.1715 15.4355C19.3515 15.1255 19.4115 14.7655 19.3515 14.4155L20.8915 14.1055ZM18.8215 17.5455C18.1215 17.7855 17.3515 17.7655 16.6715 17.4855C15.9915 17.2055 15.4515 16.6855 15.1515 16.0355L16.4915 15.3655C16.6515 15.6855 16.9215 15.9355 17.2515 16.0755C17.5815 16.2155 17.9515 16.2355 18.3015 16.1255L18.8215 17.5455ZM15.1515 16.0355C14.8515 15.3855 14.8115 14.6455 15.0315 13.9655C15.2515 13.2855 15.7115 12.7155 16.3315 12.3655L17.0715 13.6655C16.7515 13.8555 16.5115 14.1455 16.3915 14.4855C16.2715 14.8255 16.2715 15.1955 16.4115 15.5255L15.1515 16.0355ZM16.3315 12.3655C16.9515 12.0155 17.6715 11.9055 18.3715 12.0555C19.0715 12.2055 19.6915 12.6055 20.1115 13.1755L18.8715 13.9755C18.6715 13.6855 18.3715 13.4755 18.0315 13.3855C17.6915 13.2955 17.3315 13.3255 17.0115 13.4755L16.3315 12.3655ZM11.8382 4.23258C12.5282 3.53925 13.0282 3.03925 13.4682 2.69925C13.9182 2.34925 14.3582 2.11925 14.8682 2.03925L14.6082 0.559248C13.8782 0.679248 13.1382 0.819248 12.5082 1.19925C11.8682 1.57925 11.3782 2.16925 10.7791 3.17032L11.8382 4.23258ZM14.8682 2.03925C15.5882 1.91925 16.3282 2.05925 16.9582 2.43925C17.5882 2.81925 18.0682 3.40925 18.3082 4.10925L19.7782 3.65925C19.4382 2.65925 18.7782 1.79925 17.8982 1.23925C17.0182 0.679248 15.9682 0.449248 14.9482 0.599248L14.8682 2.03925ZM18.3082 4.10925C18.5482 4.80925 18.5282 5.57925 18.2482 6.25925C17.9682 6.93925 17.4482 7.47925 16.7982 7.77925L17.4682 9.11925C18.4682 8.65925 19.2782 7.85925 19.7282 6.85925C20.1782 5.85925 20.2382 4.73925 19.8782 3.69925L18.3082 4.10925ZM16.7982 7.77925C16.1482 8.07925 15.4082 8.11925 14.7282 7.89925C14.0482 7.67925 13.4782 7.21925 13.1282 6.59925L11.7882 7.26925C12.3382 8.26925 13.1982 9.07925 14.2482 9.47925C15.2982 9.87925 16.4582 9.83925 17.4782 9.35925L16.7982 7.77925ZM2.756 6.43127L5.05198 4.60348L4.57039 5.86064L2.756 6.43127ZM3.90587 6.94974C4.60861 6.67345 5.40861 7.01345 5.68489 7.71619L3.90587 6.94974ZM5.68489 7.71619C5.96118 8.41892 5.62118 9.21892 4.91845 9.49521L5.68489 7.71619ZM4.91845 9.49521C4.21571 9.7715 3.41571 9.4315 3.13943 8.72876L4.91845 9.49521ZM3.46711 8.38974C4.16984 8.11345 4.96984 8.45345 5.24613 9.15619L3.46711 8.38974ZM5.24613 9.15619C5.52242 9.85892 5.18242 10.6589 4.47968 10.9352L5.24613 9.15619ZM4.47968 10.9352C3.77695 11.2115 2.97695 10.8715 2.70066 10.1688L4.47968 10.9352ZM3.00306 9.64449C2.85306 9.01449 2.45306 8.48449 1.92306 8.18449L2.60306 6.77449C3.50306 7.27449 4.18306 8.08449 4.48306 9.04449L3.00306 9.64449ZM1.92306 8.18449C1.39306 7.88449 0.763063 7.83449 0.193063 8.04449L0.813063 9.48449C1.20306 9.31449 1.64306 9.34449 2.00306 9.56449L1.92306 8.18449ZM0.193063 8.04449C-0.376937 8.25449 -0.856937 8.70449 -1.12694 9.28449L0.213063 9.95449C0.373063 9.63449 0.643063 9.38449 0.973063 9.24449L0.193063 8.04449ZM-1.12694 9.28449C-1.39694 9.86449 -1.43694 10.5245 -1.23694 11.1345L0.203063 10.6945C0.093063 10.3045 0.123063 9.88449 0.293063 9.51449L-1.12694 9.28449ZM-1.23694 11.1345C-1.03694 11.7445 -0.606937 12.2545 -0.0469366 12.5545L0.633063 11.1445C0.273063 10.9545 0.0130634 10.6345 -0.0969366 10.2545L-1.23694 11.1345ZM-0.0469366 12.5545C0.513063 12.8545 1.17306 12.9245 1.78306 12.7545L1.40306 11.2745C1.01306 11.3845 0.593063 11.3345 0.243063 11.1345L-0.0469366 12.5545ZM1.78306 12.7545C2.39306 12.5845 2.91306 12.1845 3.23306 11.6345L1.89306 10.9645C1.73306 11.2845 1.46306 11.5345 1.13306 11.6745L1.78306 12.7545ZM3.23306 11.6345C3.55306 11.0845 3.64306 10.4345 3.48306 9.82449L2.00306 10.2645C2.11306 10.6545 2.08306 11.0745 1.91306 11.4445L3.23306 11.6345ZM5.0565 12.0793L6.10286 11.0001L5.04378 9.94192L3.99742 11.0211L5.0565 12.0793ZM3.2686 8.91241L4.08305 11.1045L5.60307 10.0045L4.78862 7.81241L3.2686 8.91241ZM13.032 17.9703L12.4933 19.4895L13.5523 20.5518L14.091 19.0326L13.032 17.9703ZM12.0056 19.0639C12.2989 19.3563 12.7738 19.357 13.0672 19.0646C13.3605 18.7722 13.3612 18.2973 13.0688 18.0039L12.0056 19.0639ZM13.0688 18.0039L12.4933 19.4895L13.5523 20.5518L14.1278 19.0662L13.0688 18.0039ZM12.1915 19.2625L13.6172 20.8435L14.6762 21.9058L13.2505 20.3249L12.1915 19.2625ZM17.4665 21.1705L16.4042 22.2304L17.4665 21.1705ZM16.9416 17.2594L14.0523 21.8525L15.1113 22.9148L18.0006 18.3217L16.9416 17.2594ZM4.06179 13.872L5.05371 11.4277L4.57267 12.6649L4.06179 13.872Z" fill="#FFD700"/></svg>', '#fbbf24')
ON CONFLICT (name) DO NOTHING;

-- Remove old badges that don't match the new system
DELETE FROM badges WHERE name IN ('Developer', 'VIP', 'Moderator');

-- Drop policy if exists before creating to avoid duplicate policy error
DROP POLICY IF EXISTS "Users can update their own active badge" ON profiles;

-- RLS Policy to allow users to update their own active badge
CREATE POLICY "Users can update their own active badge"
  ON profiles FOR UPDATE
  TO authenticated
  USING (id = auth.uid())
  WITH CHECK (id = auth.uid());
